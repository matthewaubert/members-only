<%- include('./partials/header') %>
<% if (locals.currentUser) { %>
<h2><%= title %></h2>
<p>
  Hi <span class="text-accent"><%= currentUser.firstName %></span>,
  what would you like to say?
</p>

<form action="" method="POST" class="form">
  <div class="input-container">
    <label for="title">Title</label>
    <input
      type="text"
      id="title"
      name="title"
      placeholder="Title of your message"
      class="input"
      required
      value="<%= locals.message ? decode(message.title) : '' %>"
    />
    <% const titleErr = locals.errors ? findError(errors, 'title') : null %>
    <%- titleErr && include('./partials/error-msg', { msg: titleErr.msg }) %>
  </div>

  <div class="input-container">
    <label for="text">Message</label>
    <textarea
      id="text"
      name="text"
      cols="30"
      rows="6"
      placeholder="Your message"
      class="input"
      required
    ><%= locals.message ? decode(message.text) : '' %></textarea>
    <% const textErr = locals.errors ? findError(errors, 'text') : null %>
    <%- textErr && include('./partials/error-msg', { msg: textErr.msg }) %>
  </div>

  <button type="submit" class="form-btn">
    Submit
  </button>
</form>

<% } else { %>
<h2 class="text-xl">You must be logged in to view this page.</h2>
<% } %> <%- include('./partials/footer') %>
